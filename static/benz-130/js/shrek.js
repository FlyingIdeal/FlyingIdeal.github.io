/*!
 * VERSION: 0.4.0
 * DATE: 2016-1-16
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/
!function(t){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(e){n.JT=t(n,e)}):"undefined"!=typeof exports?t(n,exports):n.JT=t(n,{})}(function(t,n){function e(t,n){for(var e in n){t[e]=n[e]}}function a(t,n){if("function"==typeof t){n.call(t,0,t)}else{if(void 0===t.length){n.call(t,0,t)}else{for(var e=0;e<t.length;e++){n.call(t[e],e,t[e])}}}}function i(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function r(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function o(t){return t?T+r(t):T}function s(t){if(!t){throw"target is undefined, can't tween!!!"}return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function u(t,n){return void 0!==t._jt_obj[n]?n:void 0!==t.style[n]?n:(n=o(n),void 0!==t.style[n]?n:void 0)}function l(t,n){if("string"==typeof n){var e=n.substr(0,2),a=parseFloat(n.substr(2));switch(e){case"+=":n=t+a;break;case"-=":n=t-a}}return n}function h(t,n){switch(t){case"opacity":case"fontWeight":case"lineHeight":case"zoom":return n;default:return"number"==typeof n?Math.round(n)+"px":n}}function c(t){void 0==t._jt_obj&&(t._jt_obj={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1})}function f(t,n){switch(n){case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":return t._jt_obj[n];default:return p(t,n)}}function p(t,n){if(document.defaultView&&document.defaultView.getComputedStyle){var e=i(n),a=document.defaultView.getComputedStyle(t,"");return a&&a.getPropertyValue(e)}return t.currentStyle?t.currentStyle[n]:null}function d(t,n,e){switch(n){case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":return t._jt_obj[n]=e,!0;
default:return m(t,n,e),!1}}function m(t,n,e){t.style[n]=h(n,e)}function v(t){return"object"==typeof t&&1===t.nodeType}function y(){x=!0;var t,n,e=O.length,a=R.length;if(0===e&&0===a){return void (x=!1)}var i=E();for(t=e-1;t>=0;t--){if(O[t]&&!O[t]._update(i)){var r=O.splice(t,1)[0];r.onUpdate&&r.onUpdate.apply(r,r.onUpdateParams),r.onEnd&&r.onEnd.apply(r,r.onEndParams),r.target=null}}for(n=a-1;n>=0;n--){if(R[n]&&!R[n]._update(i)){var o=R.splice(n,1)[0];o.onEnd&&o.onEnd.apply(o,o.onEndParams)}}I(y)}function g(){this.initialize.apply(this,arguments)}function _(t,n){var e=s(t),i=O.length;a(e,function(t,e){for(var a=i-1;a>=0;a--){var r=O[a];r.target===e&&r[n]()}})}function j(t){for(var n=O.length,e=n-1;e>=0;e--){var a=O[e];a[t]()}}function P(){this.initialize.apply(this,arguments)}function M(t,n){var e=t,i=R.length;a(e,function(t,e){for(var a=i-1;a>=0;a--){var r=R[a];r.onEnd===e&&r[n]()}})}function b(t){for(var n=R.length,e=n-1;e>=0;e--){var a=R[e];a[t]()}}var w=Date.now(),E=function(){return Date.now()-w},T="";!function(){var t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var e in n){if(n[e]+"Transform" in t.style){T=n[e];break}}}();var I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,O=[],x=!1;e(g.prototype,{initialize:function(t,e,a,i,r){this.fromVars=a,this.toVars=i,this.target=t,this.duration=1000*Math.max(e,0),this.ease=i.ease||n.Linear.None,this.delay=1000*Math.max(i.delay||0,0),this.yoyo=i.yoyo||!1,this.repeat=this.curRepeat=Math.floor(i.repeat||0),this.repeatDelay=1000*Math.max(i.repeatDelay||0,0),this.onStart=i.onStart||null,this.onStartParams=i.onStartParams||[],this.onRepeat=i.onRepeat||null,this.onRepeatParams=i.onRepeatParams||[],this.onEnd=i.onEnd||null,this.onEndParams=i.onEndParams||[],this.onUpdate=i.onUpdate||null,this.onUpdateParams=i.onUpdateParams||[],this.isPlaying=i.isPlaying||!0,this.isReverse=!1,this.isDom=r,this.curTime=0,this.lastTime=E(),this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.repeatDelay+this.duration,0!=this.delay&&(this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams)),O.unshift(this),x?this._update(this.lastTime):y()
},_update:function(t){var n=t-this.lastTime;if(this.lastTime=t,!this.isPlaying){return !0}if(this.curTime+=n,this.curTime<this.startTime){return !0}if(this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this,this.onStartParams)),this.curTime<this.startTime+this.repeatDelay){return !0}if(this.curTime<this.endTime){this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams)}else{if(0==this.curRepeat){return this._updateProp(),!1}this.yoyo&&(this.isReverse=!this.isReverse),0==this.repeatDelay?(this.curTime=this.curTime-this.duration-this.repeatDelay,this._updateProp()):(this._updateProp(),this.curTime=this.curTime-this.duration-this.repeatDelay),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this.onRepeat&&this.onRepeat.apply(this,this.onRepeatParams),this.curRepeat>0&&this.curRepeat--}return !0},_updateProp:function(){var t=0==this.duration?1:(this.curTime-this.startTime-this.repeatDelay)/this.duration;t=Math.max(0,Math.min(1,t)),this.isReverse&&(t=1-t);var n=this.ease(t),e=!1;for(var a in this.fromVars){var i=this.fromVars[a],r=this.toVars[a]||0,s=i+(r-i)*n;s=Math.round(100*s)/100,this.isDom?d(this.target,a,s)&&(e=!0):this.target[a]=s}e&&(this.target.style[o("transform")]="translate3d("+this.target._jt_obj.x+"px,"+this.target._jt_obj.y+"px,"+this.target._jt_obj.z+"px) rotateX("+this.target._jt_obj.rotationX%360+"deg) rotateY("+this.target._jt_obj.rotationY%360+"deg) rotateZ("+this.target._jt_obj.rotationZ%360+"deg) scale3d("+this.target._jt_obj.scaleX+", "+this.target._jt_obj.scaleY+", "+this.target._jt_obj.scaleZ+") ")},play:function(){this.target&&(this.isPlaying=!0)},pause:function(){this.target&&(this.isPlaying=!1)},destroy:function(t){if(this.target){var n=O.indexOf(this);if(-1!==n){var e=O.splice(n,1)[0];t&&e.onEnd&&e.onEnd.apply(e,e.onEndParams),this.target=null}}}}),e(n,{get:function(t,n){var e=s(t);if(void 0!==e.length&&(e=e[0]),v(e)){c(e);var a=u(e,n);return a?f(e,a):null}return e[n]},set:function(t,n){var e=s(t);
a(e,function(t,e){if(v(e)){c(e);var a=!1;for(var i in n){var r=u(e,i);if(r){var s=l(parseFloat(f(e,r)),n[i]);d(e,r,s)&&(a=!0)}}a&&(e.style[o("transform")]="translate3d("+e._jt_obj.x+"px,"+e._jt_obj.y+"px,"+e._jt_obj.z+"px) rotateX("+e._jt_obj.rotationX%360+"deg) rotateY("+e._jt_obj.rotationY%360+"deg) rotateZ("+e._jt_obj.rotationZ%360+"deg) scale3d("+e._jt_obj.scaleX+", "+e._jt_obj.scaleY+", "+e._jt_obj.scaleZ+") ")}else{for(var h in n){e[h]=l(e[h],n[h])}}})},fromTo:function(t,n,e,i){var r=s(t),o=[];return a(r,function(t,a){var r={},s={},h=v(a);h&&c(a);for(var p in i){if(h?void 0!==u(a,p):void 0!==a[p]){var d=h?parseFloat(f(a,p)):a[p];r[p]=l(d,e[p]),s[p]=l(d,i[p])}else{s[p]=i[p]}}var m=new g(a,n,r,s,h);o.push(m)}),1==o.length?o[0]:o},from:function(t,n,e){var i=s(t),r=[];return a(i,function(t,a){var i={},o={},s=v(a);s&&c(a);for(var h in e){if(s?void 0!==u(a,h):void 0!==a[h]){var p=s?parseFloat(f(a,h)):a[h];o[h]=p,i[h]=l(p,e[h])}else{o[h]=e[h]}}var d=new g(a,n,i,o,s);r.push(d)}),1==r.length?r[0]:r},to:function(t,n,e){var i=s(t),r=[];return a(i,function(t,a){var i={},o={},s=v(a);s&&c(a);for(var h in e){if(s?void 0!==u(a,h):void 0!==a[h]){var p=s?parseFloat(f(a,h)):a[h];i[h]=p,o[h]=l(p,e[h])}else{o[h]=e[h]}}var d=new g(a,n,i,o,s);r.push(d)}),1==r.length?r[0]:r},kill:function(t,n){var e=s(t);a(e,function(t,e){for(var a=O.length,i=a-1;i>=0;i--){var r=O[i];r.target===e&&(O.splice(i,1),n&&r.onEnd&&r.onEnd.apply(r,r.onEndParams),r.target=null)}})},killAll:function(t){if(!t){return void (O=[])}for(var n=O.length,e=n-1;e>=0;e--){var a=O.splice(e,1);t&&a.onEnd&&a.onEnd.apply(a,a.onEndParams),a.target=null}},play:function(t){_(t,"play")},playAll:function(){j("play")},pause:function(t){_(t,"pause")},pauseAll:function(){j("pause")}});var R=[];return e(P.prototype,{initialize:function(t,n,e,a){this.delay=1000*t,this.onEnd=n||null,this.onEndParams=e||[],this.curTime=0,this.lastTime=E(),this.endTime=this.delay,this.isPlaying=a||!0,R.unshift(this),x?this._update(this.lastTime):y()},_update:function(t){var n=t-this.lastTime;
return this.lastTime=t,this.isPlaying?(this.curTime+=n,this.curTime<this.endTime?!0:!1):!0},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},destroy:function(t){var n=R.indexOf(this);if(-1!==n){var e=R.splice(n,1)[0];t&&e.onEnd&&e.onEnd.apply(e,e.onEndParams)}}}),e(n,{call:function(t,n,e){return new P(t,n,e)},killCall:function(t,n){var e=t,i=R.length;a(e,function(t,e){for(var a=i-1;a>=0;a--){var r=R[a];r.onEnd===e&&(R.splice(a,1),n&&r.onEnd&&r.onEnd.apply(r,r.onEndParams))}})},killAllCalls:function(t){if(!t){return void (R=[])}for(var n=R.length,e=n-1;e>=0;e--){var a=R.splice(e,1);t&&a.onEnd&&a.onEnd.apply(a,a.onEndParams)}},playCall:function(t){M(t,"play")},playAllCalls:function(){b("play")},pauseCall:function(t){M(t,"pause")},pauseAllCalls:function(){b("pause")}}),e(n,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?0.5*t*t:-0.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return --t*t*t+1},InOut:function(t){return(t*=2)<1?0.5*t*t*t:0.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?0.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return --t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?0.5*t*t*t*t*t:0.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return 0.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?0.5*Math.pow(1024,t-1):0.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-0.5*(Math.sqrt(1-t*t)-1):0.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,e=0.1,a=0.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=a/4):n=a*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/a)))
},Out:function(t){var n,e=0.1,a=0.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=a/4):n=a*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/a)+1)},InOut:function(t){var n,e=0.1,a=0.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=a/4):n=a*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?-0.5*e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/a):e*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/a)*0.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return --t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?0.5*t*t*((n+1)*t-n):0.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-n.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+0.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+0.9375:7.5625*(t-=2.625/2.75)*t+0.984375},InOut:function(t){return 0.5>t?0.5*n.Bounce.In(2*t):0.5*n.Bounce.Out(2*t-1)+0.5}}}),n.now=E,n});
/*!
 * VERSION: 0.7.0
 * DATE: 2015-12-20
 * GIT:https://github.com/shrekshrek/css3d-engine
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/
!function(t){var i="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(e){i.C3D=t(i,e)}):"undefined"!=typeof exports?t(i,exports):i.C3D=t(i,{})}(function(t,i){function e(t){return Math.round(t)}function s(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function n(t){var e;switch(t.type){case"sprite":e=new i.Sprite;break;case"plane":e=new i.Plane;break;case"cube":e=new i.Cube}if(t.size&&e.size.apply(e,t.size),t.position&&e.position.apply(e,t.position),t.rotation&&e.rotation.apply(e,t.rotation),t.scale&&e.scale.apply(e,t.scale),t.origin&&e.origin.apply(e,t.origin),t.visibility&&e.visibility.apply(e,t.visibility),t.material&&e.material.apply(e,t.material),t.filter&&e.filter.apply(e,t.filter),t.name&&e.name.apply(e,[t.name]),e.update(),t.children){for(var s=0,r=t.children.length;r>s;s++){var h=t.children[s],a=n(h);
e.addChild(a)}}return e}var r=t.C3D;i.VERSION="0.7.0",i.noConflict=function(){return t.C3D=r,this};var h=function(t){var i=[];for(var e in t){i.push(e)}return i},a=function(t){var i=arguments.length;if(2>i||null==t){return t}for(var e=1;i>e;e++){for(var s=arguments[e],n=h(s),r=n.length,a=0;r>a;a++){var o=n[a];t[o]=s[o]}}return t},o=function(t,i){var e,s=this;e=t&&Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},a(e,s,i);var n=function(){this.constructor=e};return n.prototype=s.prototype,e.prototype=new n,t&&a(e.prototype,t),e.__super__=s.prototype,e},l="";return function(){var t=document.createElement("div"),i=["Webkit","Moz","Ms","O"];for(var e in i){if(i[e]+"Transform" in t.style){l=i[e];break}}}(),i.getRandomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},i.rgb2hex=function(t,i,e){return(t<<16|i<<8|e).toString(16)},i.hex2rgb=function(t){var i=Math.floor("0x"+t),e=i>>16&255,s=i>>8&255,n=255&i;return[e,s,n]},i.Object=function(){this.initialize.apply(this,arguments)},a(i.Object.prototype,{x:0,y:0,z:0,position:function(t,i,e){switch(arguments.length){case 1:this.x=t,this.y=t,this.z=t;break;case 2:this.x=t,this.y=i;break;case 3:this.x=t,this.y=i,this.z=e}return this},move:function(t,i,e){switch(arguments.length){case 1:this.x+=t,this.y+=t,this.z+=t;break;case 2:this.x+=t,this.y+=i;break;case 3:this.x+=t,this.y+=i,this.z+=e}return this},rotationX:0,rotationY:0,rotationZ:0,rotation:function(t,i,e){switch(arguments.length){case 1:this.rotationX=t,this.rotationY=t,this.rotationZ=t;break;case 2:this.rotationX=t,this.rotationY=i;break;case 3:this.rotationX=t,this.rotationY=i,this.rotationZ=e}return this},rotate:function(t,i,e){switch(arguments.length){case 1:this.rotationX+=t,this.rotationY+=t,this.rotationZ+=t;break;case 2:this.rotationX+=t,this.rotationY+=i;break;case 3:this.rotationX+=t,this.rotationY+=i,this.rotationZ+=e}return this},scaleX:1,scaleY:1,scaleZ:1,scale:function(t,i,e){switch(arguments.length){case 1:this.scaleX=t,this.scaleY=t,this.scaleZ=t;
break;case 2:this.scaleX=t,this.scaleY=i;break;case 3:this.scaleX=t,this.scaleY=i,this.scaleZ=e}return this},width:0,height:0,depth:0,size:function(t,i,e){switch(arguments.length){case 1:this.width=t,this.height=t,this.depth=t;break;case 2:this.width=t,this.height=i;break;case 3:this.width=t,this.height=i,this.depth=e}return this},originX:0,originY:0,originZ:0,_orgO:{x:0,y:0,z:0},_orgT:{x:0,y:0,z:0},_orgF:{x:0,y:0,z:0},origin:function(t,i,e){switch(arguments.length){case 1:this.originX=t,this.originY=t,this.originZ=t;break;case 2:this.originX=t,this.originY=i;break;case 3:this.originX=t,this.originY=i,this.originZ=e}return this},_name:"",name:function(t){return this._name=t,this},initialize:function(){this.x=0,this.y=0,this.z=0,this.rotationX=0,this.rotationY=0,this.rotationZ=0,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.width=0,this.height=0,this.depth=0,this.originX="50%",this.originY="50%",this.originZ="0px",this._orgO={x:"50%",y:"50%",z:"0px"},this._orgT={x:"-50%",y:"-50%",z:"0px"},this._orgF={x:0,y:0,z:0},this.children=[],this._name=""},destroy:function(){this.parent&&this.parent.removeChild(this)},parent:null,children:null,addChild:function(t){return null!=t.parent&&t.parent.removeChild(t),""!=t._name&&(this[t._name]=t),this.children.push(t),t.parent=this,this},removeChild:function(t){for(var i=this.children.length-1;i>=0;i--){if(this.children[i]===t){return""!=t._name&&delete this[t._name],this.children.splice(i,1),t.parent=null,this}}return this},removeAllChild:function(){for(var t=this.children.length-1;t>=0;t--){var i=this.children[t];""!=i._name&&delete this[i._name],i.parent=null}return this.children=[],this},remove:function(){return null!=this.parent&&this.parent.removeChild(this),this}}),i.Object.extend=o,i.Sprite=i.Object.extend({el:null,alpha:1,visible:!0,mat:null,initialize:function(t){i.Sprite.__super__.initialize.apply(this,[t]),this.alpha=1,this.visible=!0;var e;if(t&&t.el){switch(typeof t.el){case"string":e=document.createElement("div"),e.style.position="absolute",e.innerHTML=t.el;
break;case"object":1===t.el.nodeType&&(e=t.el)}}e||(e=document.createElement("div"),e.style.position="absolute"),e.style[l+"Transform"]="translateZ(0px)",e.style[l+"TransformStyle"]="preserve-3d",this.el=e,e.le=this},update:function(){return this.updateS(),this.updateM(),this.updateO(),this.updateT(),this.updateV(),this},updateS:function(){return this},updateM:function(){if(!this.mat){return this}for(var t in this.mat){switch(t){case"bothsides":this.el.style[l+"BackfaceVisibility"]=this.mat[t]?"visible":"hidden";break;case"image":this.el.style["background"+s(t)]=""!==this.mat[t]?"url("+this.mat[t]+")":"";break;default:this.el.style["background"+s(t)]=this.mat[t]}}return this},updateO:function(){if("number"==typeof this.originX){var t=this.originX-this._orgF.x;this._orgO.x=t+"px",this._orgT.x=-t+"px"}else{this._orgO.x=this.originX,this._orgT.x="-"+this.originX}if("number"==typeof this.originY){var i=this.originY-this._orgF.y;this._orgO.y=i+"px",this._orgT.y=-i+"px"}else{this._orgO.y=this.originY,this._orgT.y="-"+this.originY}if("number"==typeof this.originZ){var e=this.originZ-this._orgF.z;this._orgO.z=e+"px",this._orgT.z=-e+"px"}else{this._orgO.z=this._orgT.z="0px"}return this.el.style[l+"TransformOrigin"]=this._orgO.x+" "+this._orgO.y+" "+this._orgO.z,this},updateT:function(){return this.el.style[l+"Transform"]="translate3d("+this._orgT.x+", "+this._orgT.y+", "+this._orgT.z+") translate3d("+this.x+"px,"+this.y+"px,"+this.z+"px) rotateX("+this.rotationX%360+"deg) rotateY("+this.rotationY%360+"deg) rotateZ("+this.rotationZ%360+"deg) scale3d("+this.scaleX+", "+this.scaleY+", "+this.scaleZ+") ",this},updateV:function(){return this.el.style.opacity=this.alpha,this.el.style.display=this.visible?"block":"none",this},addChild:function(t){return i.Sprite.__super__.addChild.apply(this,[t]),this.el&&t.el&&this.el.appendChild(t.el),this},removeChild:function(t){for(var i=this.children.length-1;i>=0;i--){if(this.children[i]===t){return""!=t._name&&delete this[t._name],this.children.splice(i,1),t.parent=null,this.el.removeChild(t.el),this
}}return this},removeAllChild:function(){for(var t=this.children.length-1;t>=0;t--){var i=this.children[t];""!=i._name&&delete this[i._name],i.parent=null,this.el.removeChild(i.el)}return this.children=[],this},on:function(t){if("object"==typeof t){for(var i in t){this.el.addEventListener(i,t[i],!1)}}else{2===arguments.length?this.el.addEventListener(arguments[0],arguments[1],!1):3===arguments.length&&this.el.addEventListener(arguments[0],arguments[1],arguments[2])}return this},off:function(t){if("object"==typeof t){for(var i in t){this.el.removeEventListener(i,t[i],!1)}}else{2===arguments.length&&this.el.removeEventListener(arguments[0],arguments[1],!1)}return this},buttonMode:function(t){return this.el.style.cursor=t?"pointer":"auto",this},material:function(t){return this.mat=t,this},visibility:function(t){return void 0!==t.visible&&(this.visible=t.visible),void 0!==t.alpha&&(this.alpha=t.alpha),this}}),i.Stage=i.Sprite.extend({camera:null,fov:null,__rfix:null,__pfix:null,initialize:function(t){i.Stage.__super__.initialize.apply(this,[t]),t&&t.el||(this.el.style.top="0px",this.el.style.left="0px",this.el.style.width="0px",this.el.style.height="0px"),this.el.style[l+"Perspective"]="800px",this.el.style[l+"TransformStyle"]="flat",this.el.style[l+"Transform"]="",this.el.style.overflow="hidden",this.__rfix=new i.Sprite,this.el.appendChild(this.__rfix.el),this.__pfix=new i.Sprite,this.__rfix.el.appendChild(this.__pfix.el),this.setCamera(new i.Camera)},updateS:function(){return this.el.style.width=e(this.width)+"px",this.el.style.height=e(this.height)+"px",this},updateT:function(){return this.fov=e(0.5/Math.tan(0.5*this.camera.fov/180*Math.PI)*this.height),this.el.style[l+"Perspective"]=this.fov+"px",this.__rfix.position(e(this.width/2),e(this.height/2),this.fov).rotation(-this.camera.rotationX,-this.camera.rotationY,-this.camera.rotationZ).updateT(),this.__pfix.position(-this.camera.x,-this.camera.y,-this.camera.z).updateT(),this},addChild:function(t){return this.__pfix.addChild(t),this
},removeChild:function(t){return this.__pfix.removeChild(t),this},setCamera:function(t){return this.camera&&(this.camera.stage=null),this.camera=t,this.camera.stage=this,this}}),i.Camera=i.Object.extend({fov:null,stage:null,initialize:function(t){i.Camera.__super__.initialize.apply(this,[t]),this.fov=75},update:function(){return this.updateT(),this},updateS:function(){return this},updateM:function(){return this},updateT:function(){return this.stage&&this.stage.updateT(),this},updateV:function(){return this}}),i.Plane=i.Sprite.extend({flt:null,initialize:function(t){i.Plane.__super__.initialize.apply(this,[t])},update:function(){return i.Plane.__super__.update.apply(this),this.updateF(),this},updateS:function(){return this.el.style.width=e(this.width)+"px",this.el.style.height=e(this.height)+"px",this},updateF:function(){if(!this.flt){return this}var t="";for(var i in this.flt){t+=""!==this.flt[i]?i+"("+this.flt[i].join(",")+")":""}return""!==t&&(this.el.style[l+"Filter"]=t),this},filter:function(t){return this.flt=t,this}}),i.Cube=i.Sprite.extend({front:null,back:null,left:null,right:null,up:null,down:null,flt:null,initialize:function(t){i.Cube.__super__.initialize.apply(this,[t]),this.front=new i.Plane,this.addChild(this.front),this.back=new i.Plane,this.addChild(this.back),this.left=new i.Plane,this.addChild(this.left),this.right=new i.Plane,this.addChild(this.right),this.up=new i.Plane,this.addChild(this.up),this.down=new i.Plane,this.addChild(this.down)},update:function(){return i.Cube.__super__.update.apply(this),this.updateF(),this},updateS:function(){var t=e(this.width),i=e(this.height),s=e(this.depth);return this._orgF.x=this.width/2,this._orgF.y=this.height/2,this._orgF.z=this.depth/2,this.front.size(t,i,0).position(0,0,-s/2).rotation(0,0,0).updateS().updateT(),this.back.size(t,i,0).position(0,0,s/2).rotation(0,180,0).updateS().updateT(),this.left.size(s,i,0).position(-t/2,0,0).rotation(0,90,0).updateS().updateT(),this.right.size(s,i,0).position(t/2,0,0).rotation(0,-90,0).updateS().updateT(),this.up.size(t,s,0).position(0,-i/2,0).rotation(-90,0,0).updateS().updateT(),this.down.size(t,s,0).position(0,i/2,0).rotation(90,0,0).updateS().updateT(),this
},updateM:function(){if(!this.mat){return this}for(var t in this.mat){switch(t){case"front":case"back":case"left":case"right":case"up":case"down":this[t].material({image:this.mat[t]}).updateM();break;default:this.front.material(this.mat).updateM(),this.back.material(this.mat).updateM(),this.left.material(this.mat).updateM(),this.right.material(this.mat).updateM(),this.up.material(this.mat).updateM(),this.down.material(this.mat).updateM()}}return this},updateF:function(){return this.flt?(this.front.filter(this.flt).updateF(),this.back.filter(this.flt).updateF(),this.left.filter(this.flt).updateF(),this.right.filter(this.flt).updateF(),this.up.filter(this.flt).updateF(),this.down.filter(this.flt).updateF(),this):this},filter:function(t){return this.flt=t,this}}),i.create=function(t){var i;switch(typeof t){case"array":i={type:"sprite",children:t};break;case"object":i=t;break;default:return}return n(i)},i});
/*!
 * VERSION: 0.6.0
 * DATE: 2015-12-31
 * GIT:https://github.com/shrekshrek/csstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/
!function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(n){e.CT=t(e,n)}):"undefined"!=typeof exports?t(e,exports):e.CT=t(e,{})}(function(t,e){function n(t,e){for(var n in e){t[n]=e[n]}}function i(t,e){if("function"==typeof t){e.call(t,0,t)}else{if(void 0===t.length){e.call(t,0,t)}else{for(var n=0;n<t.length;n++){e.call(t[n],n,t[n])}}}}function r(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function a(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function o(t){return t?E+a(t):E}function s(t){if(!t){throw"target is undefined, can't tween!!!"}return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function l(t,e){return void 0!==t.style[e]?e:(e=o(e),void 0!==t.style[e]?e:null)
}function u(t,e){if("string"==typeof e){var n=e.substr(0,2),i=parseFloat(e.substr(2));switch(n){case"+=":e=parseFloat(t)+i;break;case"-=":e=parseFloat(t)-i}}return e}function d(t,e){switch(t){case"opacity":case"fontWeight":case"lineHeight":case"zoom":return e;default:return"number"==typeof e?Math.round(e)+"px":e}}function f(t,e){if(document.defaultView&&document.defaultView.getComputedStyle){var n=r(e),i=document.defaultView.getComputedStyle(t,"");return i&&i.getPropertyValue(n)}return t.currentStyle?t.currentStyle[e]:null}function h(t,e){for(var n in e){void 0!=t.style[n]&&(t.style[n]=d(n,e[n]))}}function c(){return ++T}function m(t){for(var e in b){var n=b[e];if(n.type===F&&n.name===t||n.type===M&&n.selectorText===t){return{rule:n,index:e}}}return null}function v(t,e){var n=b.length;A.insertRule?A.insertRule(t+"{"+e+"}",n):A.addRule&&A.addRule(t,e,n)}function y(t){var e=m(t);null!==e&&(A.deleteRule?A.deleteRule(e.index):A.removeRule&&A.removeRule(e.index))}function p(t,e,n){var i="ct_kfs_"+t,a="0%{",s="100%{";for(var l in e){a+=r(l)+":"+d(l,e[l])+";",s+=r(l)+":"+d(l,n[l])+";"}return a+="}",s+="}",v("@"+r(o("Keyframes"))+" "+i,a+s),i}function g(){return ++k}function w(){this.initialize.apply(this,arguments)}var E="",R="animationstart",S="animationiteration",_="animationend",L="transitionend";!function(){var t=document.createElement("div"),e=["Webkit","Moz","Ms","O"];for(var n in e){if(e[n]+"Transition" in t.style){E=e[n],"Moz"!==E&&(R=E.toLowerCase()+"AnimationStart",S=E.toLowerCase()+"AnimationIteration",_=E.toLowerCase()+"AnimationEnd",L=E.toLowerCase()+"TransitionEnd");break}}}();var A,b,C=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,F=window.CSSRule.KEYFRAMES_RULE||window.CSSRule.WEBKIT_KEYFRAMES_RULE||window.CSSRule.MOZ_KEYFRAMES_RULE,M=window.CSSRule.STYLE_RULE||window.CSSRule.WEBKIT_STYLE_RULE||window.CSSRule.MOZ_STYLE_RULE,T=0;!function(){var t=document.createElement("style");
t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),A=t.sheet,b=A.cssRules||A.rules||[]}();var H={},k=0;return n(w.prototype,{initialize:function(t,n,i,r){var a=this;this.fromVars=i,this.toVars=r,this.target=t,this.duration=Math.max(n,0),this.ease="cubic-bezier"+(r.ease||e.Linear.None),this.delay=Math.max(r.delay||0,0),this.yoyo=r.yoyo||!1,this.repeat=Math.floor(r.repeat||1),this.onStart=r.onStart||null,this.onStartParams=r.onStartParams||[],this.onRepeat=r.onRepeat||null,this.onRepeatParams=r.onRepeatParams||[],this.onEnd=r.onEnd||null,this.onEndParams=r.onEndParams||[],this.type=r.type||"";var s=g();if(this.target._ct_id&&H[this.target._ct_id].destroy(),this.target._ct_id=s,"a"==this.type){this.startHandler=function(){a.onStart&&a.onStart.apply(this,a.onStartParams)},this.target.addEventListener(R,this.startHandler,!1),this.repeatHandler=function(){a.onRepeat&&a.onRepeat.apply(this,a.onRepeatParams)},this.target.addEventListener(S,this.repeatHandler,!1),this.endHandler=function(){a.destroy(!0)},this.target.addEventListener(_,this.endHandler,!1);var l=c();this.kfsName=p(l,this.fromVars,this.toVars),this.target.style[o("Animation")]=this.kfsName+" "+this.duration+"s "+this.ease+" "+this.delay+"s "+(this.repeat<0?"infinite":this.repeat)+" "+(this.yoyo?"alternate":"normal"),this.target.style[o("AnimationFillMode")]="both",h(a.target,a.toVars)}else{this.endHandler=function(){a.destroy(!0)},this.target.addEventListener(L,this.endHandler,!1),C(function(){C(function(){a.target.style[o("Transition")]="all "+a.duration+"s "+a.ease+" "+a.delay+"s",h(a.target,a.toVars)})})}H[s]=this},destroy:function(t){if(0==t){for(var e in this.toVars){void 0!=this.target.style[e]&&(this.target.style[e]=f(this.target,e))}}"a"==this.type?(this.target.removeEventListener(R,this.startHandler,!1),this.target.removeEventListener(S,this.repeatHandler,!1),this.target.removeEventListener(_,this.endHandler,!1),this.target.style[o("Animation")]="",this.target.style[o("AnimationFillMode")]="",y(this.kfsName)):(this.target.removeEventListener(L,this.endHandler,!1),this.target.style[o("Transition")]=""),delete H[this.target._ct_id],delete this.target._ct_id,1==t&&this.onEnd&&this.onEnd.apply(this,this.onEndParams)
}}),n(e,{get:function(t,e){var n=s(t);void 0!==n.length&&(n=n[0]);var i=l(n,e);return i?f(n,i):null},set:function(t,e){var n=s(t);i(n,function(t,n){var i={};for(var r in e){var a=l(n,r);a&&(i[a]=d(a,u(f(n,a),e[r])))}h(n,i)})},fromTo:function(t,e,n,r){var a=s(t),o=[];return i(a,function(t,i){var a={},s={};for(var l in r){if(void 0!==i.style[l]){var d=parseFloat(f(i,l));a[l]=u(d,n[l]),s[l]=u(d,r[l])}else{s[l]=r[l]}}h(i,a);var c=new w(i,e,a,s);o.push(c)}),1==o.length?o[0]:o},from:function(t,e,n){var r=s(t),a=[];return i(r,function(t,i){var r={},o={};for(var s in n){if(void 0!==i.style[s]){var l=parseFloat(f(i,s));o[s]=l,r[s]=u(l,n[s])}else{o[s]=n[s]}}h(i,r);var d=new w(i,e,r,o);a.push(d)}),1==a.length?a[0]:a},to:function(t,e,n){var r=s(t),a=[];return i(r,function(t,i){var r={},o={};for(var s in n){if(void 0!==i.style[s]){var l=parseFloat(f(i,s));r[s]=l,o[s]=u(l,n[s])}else{o[s]=n[s]}}var d=new w(i,e,r,o);a.push(d)}),1==a.length?a[0]:a},kill:function(t,e){var n=s(t);i(n,function(t,n){n._ct_id&&H[n._ct_id].destroy(e)})},killAll:function(t){for(var e in H){H[e].destroy(t)}}}),n(e,{Linear:{None:"(0, 0, 1, 1)"},Quad:{In:"(0.3, 0, 0.65, 0.75)",Out:"(0.35, 0.25, 0.7, 1)",InOut:"(0.46, 0.03, 0.54, 0.97)"},Quart:{In:"(0.5, 0, 0.75, 0)",Out:"(0.25, 1, 0.5, 1)",InOut:"(0.75, 0, 0.25, 1)"},Back:{In:"(0, 0.35, 0.7, -0.6)",Out:"(0.3, 1.6, 0.65, 1)"}}),e});

/*! touchjs.min v0.2.14  2014-08-05 */
"use strict";!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(b):a.touch=b()}(this,function(){function a(){var a="mouseup mousedown mousemove mouseout",c="touchstart touchmove touchend touchcancel",d=b.hasTouch?c:a;d.split(" ").forEach(function(a){document.addEventListener(a,A,!1)})}var b={};b.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},b.hasTouch="ontouchstart" in window,b.getType=function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},b.getSelector=function(a){if(a.id){return"#"+a.id}if(a.className){var b=a.className.split(/\s+/);return"."+b.join(".")}return a===document?"body":a.tagName.toLowerCase()},b.matchSelector=function(a,b){return a.webkitMatchesSelector(b)},b.getEventListeners=function(a){return a.listeners},b.getPCevts=function(a){return this.PCevts[a]||a},b.forceReflow=function(){var a="reflowDivBlock",b=document.getElementById(a);b||(b=document.createElement("div"),b.id=a,document.body.appendChild(b));var c=b.parentNode,d=b.nextSibling;c.removeChild(b),c.insertBefore(b,d)},b.simpleClone=function(a){return Object.create(a)},b.getPosOfEvent=function(a){if(this.hasTouch){for(var b=[],c=null,d=0,e=a.touches.length;e>d;d++){c=a.touches[d],b.push({x:c.pageX,y:c.pageY})}return b}return[{x:a.pageX,y:a.pageY}]},b.getDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},b.getFingers=function(a){return a.touches?a.touches.length:1},b.calScale=function(a,b){if(a.length>=2&&b.length>=2){var c=this.getDistance(a[1],a[0]),d=this.getDistance(b[1],b[0]);return d/c}return 1},b.getAngle=function(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI},b.getAngle180=function(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return 0>c?c+180:c},b.getDirectionFromAngle=function(a){var b={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(var c in b){if(b[c]){return c}}return null
},b.getXYByElement=function(a){for(var b=0,c=0;a.offsetParent;){b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent}return{left:b,top:c}},b.reset=function(){h=i=j=null,q=o=k=l=!1,m=!1,f={},t=!1},b.isTouchMove=function(a){return"touchmove"===a.type||"mousemove"===a.type},b.isTouchEnd=function(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type},b.env=function(){var a={},b=navigator.userAgent,c=b.match(/(Android)[\s\/]+([\d\.]+)/),d=b.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),e=b.match(/(Windows\s+Phone)\s([\d\.]+)/),f=/WebKit\/[\d.]+/i.test(b),g=d?navigator.standalone?f:/Safari/i.test(b)&&!/CriOS/i.test(b)&&!/MQQBrowser/i.test(b):!1;return c&&(a.android=!0,a.version=c[2]),d&&(a.ios=!0,a.version=d[2].replace(/_/g,"."),a.ios7=/^7/.test(a.version),"iPad"===d[1]?a.ipad=!0:"iPhone"===d[1]?(a.iphone=!0,a.iphone5=568==screen.height):"iPod"===d[1]&&(a.ipod=!0)),e&&(a.wp=!0,a.version=e[2],a.wp8=/^8/.test(a.version)),f&&(a.webkit=!0),g&&(a.safari=!0),a}();var c={proxyid:0,proxies:[],trigger:function(a,b,c){c=c||{};var d,e={bubbles:!0,cancelable:!0,detail:c};try{"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))}catch(f){console.warn("Touch.js is not supported by environment.")}},bind:function(a,c,d){a.listeners=a.listeners||{},a.listeners[c]?a.listeners[c].push(d):a.listeners[c]=[d];var e=function(a){b.env.ios7&&b.forceReflow(),a.originEvent=a;for(var c in a.detail){"type"!==c&&(a[c]=a.detail[c])}a.startRotate=function(){t=!0};var e=d.call(a.target,a);"undefined"==typeof e||e||(a.stopPropagation(),a.preventDefault())};d.proxy=d.proxy||{},d.proxy[c]?d.proxy[c].push(this.proxyid++):d.proxy[c]=[this.proxyid++],this.proxies.push(e),a.addEventListener&&a.addEventListener(c,e,!1)},unbind:function(a,b,c){if(c){var d=c.proxy[b];d&&d.length&&d.forEach(function(){a.removeEventListener&&a.removeEventListener(b,this.proxies[this.proxyid],!1)})}else{var e=a.listeners[b];
e&&e.length&&e.forEach(function(c){a.removeEventListener(b,c,!1)})}},delegate:function(a,c,d,e){var f=function(c){var f,g;c.originEvent=c;for(var h in c.detail){"type"!==h&&(c[h]=c.detail[h])}c.startRotate=function(){t=!0};var i=b.getSelector(a)+" "+d,j=b.matchSelector(c.target,i),k=b.matchSelector(c.target,i+" "+c.target.nodeName);if(!j&&k){for(b.env.ios7&&b.forceReflow(),f=c.target;!b.matchSelector(f,i);){f=f.parentNode}g=e.call(c.target,c),"undefined"==typeof g||g||(c.stopPropagation(),c.preventDefault())}else{b.env.ios7&&b.forceReflow(),(j||k)&&(g=e.call(c.target,c),"undefined"==typeof g||g||(c.stopPropagation(),c.preventDefault()))}};e.proxy=e.proxy||{},e.proxy[c]?e.proxy[c].push(this.proxyid++):e.proxy[c]=[this.proxyid++],this.proxies.push(f),a.listeners=a.listeners||{},a.listeners[c]?a.listeners[c].push(f):a.listeners[c]=[f],a.addEventListener&&a.addEventListener(c,f,!1)},undelegate:function(a,b,c,d){if(d){var e=d.proxy[b];e.length&&e.forEach(function(){a.removeEventListener&&a.removeEventListener(b,this.proxies[this.proxyid],!1)})}else{var f=a.listeners[b];f.forEach(function(c){a.removeEventListener(b,c,!1)})}}},d={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},e={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},f={start:null,move:null,end:null},g=0,h=null,i=null,j=null,k=!1,l=!1,m=!1,n={},o=!1,p=null,q=!1,r=null,s=1,t=!1,u=[],v=0,w=0,x=0,y=null,z={getAngleDiff:function(a){for(var c=parseInt(v-b.getAngle180(a[0],a[1]),10),d=0;
Math.abs(c-w)>90&&d++<50;){0>w?c-=180:c+=180}return w=parseInt(c,10)},pinch:function(a){var g=a.target;if(d.pinch){if(!o){return}if(b.getFingers(a)<2&&!b.isTouchEnd(a)){return}var h=b.calScale(f.start,f.move),i=this.getAngleDiff(f.move),j={type:"",originEvent:a,scale:h,rotation:i,direction:i>0?"right":"left",fingersCount:b.getFingers(a)};if(l?b.isTouchMove(a)?(j.fingerStatus="move",c.trigger(g,e.PINCH,j)):b.isTouchEnd(a)&&(j.fingerStatus="end",c.trigger(g,e.PINCH_END,j),b.reset()):(l=!0,j.fingerStatus="start",c.trigger(g,e.PINCH_START,j)),Math.abs(1-h)>d.minScaleRate){var k=b.simpleClone(j),m=1e-11;h>s?(s=h-m,c.trigger(g,e.PINCH_OUT,k,!1)):s>h&&(s=h+m,c.trigger(g,e.PINCH_IN,k,!1)),b.isTouchEnd(a)&&(s=1)}if(Math.abs(i)>d.minRotationAngle){var n,p=b.simpleClone(j);n=i>0?e.ROTATION_RIGHT:e.ROTATION_LEFT,c.trigger(g,n,p,!1),c.trigger(g,e.ROTATION,j)}}},rotateSingleFinger:function(a){var d=a.target;if(t&&b.getFingers(a)<2){if(!f.move){return}if(u.length<2){var g=b.getXYByElement(d);u=[{x:g.left+d.offsetWidth/2,y:g.top+d.offsetHeight/2},f.move[0]],v=parseInt(b.getAngle180(u[0],u[1]),10)}var h=[u[0],f.move[0]],i=this.getAngleDiff(h),j={type:"",originEvent:a,rotation:i,direction:i>0?"right":"left",fingersCount:b.getFingers(a)};b.isTouchMove(a)?j.fingerStatus="move":(b.isTouchEnd(a)||"mouseout"===a.type)&&(j.fingerStatus="end",c.trigger(d,e.PINCH_END,j),b.reset());var k=i>0?e.ROTATION_RIGHT:e.ROTATION_LEFT;c.trigger(d,k,j),c.trigger(d,e.ROTATION,j)}},swipe:function(a){var h=a.target;if(o&&f.move&&!(b.getFingers(a)>1)){var i=Date.now(),j=i-g,l=b.getDistance(f.start[0],f.move[0]),p={x:f.move[0].x-n.left,y:f.move[0].y-n.top},q=b.getAngle(f.start[0],f.move[0]),r=b.getDirectionFromAngle(q),s=j/1000,t=10*(10-d.swipeFactor)*s*s,u={type:e.SWIPE,originEvent:a,position:p,direction:r,distance:l,distanceX:f.move[0].x-f.start[0].x,distanceY:f.move[0].y-f.start[0].y,x:f.move[0].x-f.start[0].x,y:f.move[0].y-f.start[0].y,angle:q,duration:j,fingersCount:b.getFingers(a),factor:t};if(d.swipe){var v=function(){var a=e;
switch(r){case"up":c.trigger(h,a.SWIPE_UP,u);break;case"down":c.trigger(h,a.SWIPE_DOWN,u);break;case"left":c.trigger(h,a.SWIPE_LEFT,u);break;case"right":c.trigger(h,a.SWIPE_RIGHT,u)}};k?b.isTouchMove(a)?(u.fingerStatus=u.swipe="move",c.trigger(h,e.SWIPING,u),j>d.swipeTime&&j<d.swipeTime+50&&l>d.swipeMinDistance&&(v(),c.trigger(h,e.SWIPE,u,!1))):(b.isTouchEnd(a)||"mouseout"===a.type)&&(u.fingerStatus=u.swipe="end",c.trigger(h,e.SWIPE_END,u),d.swipeTime>j&&l>d.swipeMinDistance&&(v(),c.trigger(h,e.SWIPE,u,!1))):(u.fingerStatus=u.swipe="start",k=!0,c.trigger(h,e.SWIPE_START,u))}d.drag&&(m?b.isTouchMove(a)?(u.fingerStatus=u.swipe="move",c.trigger(h,e.DRAG,u)):b.isTouchEnd(a)&&(u.fingerStatus=u.swipe="end",c.trigger(h,e.DRAGEND,u)):(u.fingerStatus=u.swipe="start",m=!0,c.trigger(h,e.DRAGSTART,u)))}},tap:function(a){var h=a.target;if(d.tap){var i=Date.now(),j=i-g,k=b.getDistance(f.start[0],f.move?f.move[0]:f.start[0]);clearTimeout(p);var l=function(){if(y&&d.doubleTap&&g-x<d.maxDoubleTapInterval){var a=b.getDistance(y,f.start[0]);if(16>a){return !0}}return !1}();if(l){return clearTimeout(r),void c.trigger(h,e.DOUBLE_TAP,{type:e.DOUBLE_TAP,originEvent:a,position:f.start[0]})}if(d.tapMaxDistance<k){return}d.holdTime>j&&b.getFingers(a)<=1&&(q=!0,x=i,y=f.start[0],r=setTimeout(function(){c.trigger(h,e.TAP,{type:e.TAP,originEvent:a,fingersCount:b.getFingers(a),position:y})},d.tapTime))}},hold:function(a){var e=a.target;d.hold&&(clearTimeout(p),p=setTimeout(function(){if(f.start){var g=b.getDistance(f.start[0],f.move?f.move[0]:f.start[0]);d.tapMaxDistance<g||q||c.trigger(e,"hold",{type:"hold",originEvent:a,fingersCount:b.getFingers(a),position:f.start[0]})}},d.holdTime))}},A=function(a){var c=a.target;switch(a.type){case"touchstart":case"mousedown":u=[],o=!0,(!f.start||f.start.length<2)&&(f.start=b.getPosOfEvent(a)),b.getFingers(a)>=2&&(v=parseInt(b.getAngle180(f.start[0],f.start[1]),10)),g=Date.now(),h=a,n={};var d=c.getBoundingClientRect(),e=document.documentElement;n={top:d.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:d.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)},z.hold(a);
break;case"touchmove":case"mousemove":if(!o||!f.start){return}f.move=b.getPosOfEvent(a),b.getFingers(a)>=2?z.pinch(a):t?z.rotateSingleFinger(a):z.swipe(a);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!o){return}j=a,l?z.pinch(a):t?z.rotateSingleFinger(a):k?z.swipe(a):z.tap(a),b.reset(),v=0,w=0,a.touches&&1===a.touches.length&&(o=!0,t=!0)}},B=function(){function a(a){b.hasTouch||(a=b.getPCevts(a)),j.forEach(function(b){c.delegate(b,a,h,g[a])})}function d(a){b.hasTouch||(a=b.getPCevts(a)),j.forEach(function(b){c.bind(b,a,g[a])})}var e,f,g,h,i=arguments;if(i.length<2||i>4){return console.error("unexpected arguments!")}var j="string"===b.getType(i[0])?document.querySelectorAll(i[0]):i[0];if(j=j.length?Array.prototype.slice.call(j):[j],3===i.length&&"string"===b.getType(i[1])){return e=i[1].split(" "),f=i[2],void e.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),j.forEach(function(b){c.bind(b,a,f)})})}if(3!==i.length||"object"!==b.getType(i[1])){if(2!==i.length||"object"!==b.getType(i[1])){if(4===i.length&&"object"===b.getType(i[2])){return e=i[1].split(" "),f=i[3],void e.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),j.forEach(function(b){c.bind(b,a,f)})})}if(4===i.length){var k=j[0];return e=i[1].split(" "),h=i[2],f=i[3],void e.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),c.delegate(k,a,h,f)})}}else{g=i[1];for(var l in g){d(l)}}}else{g=i[1],h=i[2];for(var m in g){a(m)}}},C=function(){var a,d,e=arguments;if(e.length<1||e.length>4){return console.error("unexpected arguments!")}var f="string"===b.getType(e[0])?document.querySelectorAll(e[0]):e[0];if(f=f.length?Array.prototype.slice.call(f):[f],1===e.length||2===e.length){return void f.forEach(function(d){a=e[1]?e[1].split(" "):Object.keys(d.listeners),a.length&&a.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),c.unbind(d,a),c.undelegate(d,a)})})}if(3===e.length&&"function"===b.getType(e[2])){return d=e[2],void f.forEach(function(f){a=e[1].split(" "),a.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),c.unbind(f,a,d)
})})}if(3===e.length&&"string"===b.getType(e[2])){var g=e[2];return void f.forEach(function(d){a=e[1].split(" "),a.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),c.undelegate(d,a,g)})})}return 4===e.length?(d=e[3],void f.forEach(function(f){a=e[1].split(" "),a.forEach(function(a){b.hasTouch||(a=b.getPCevts(a)),c.undelegate(f,a,g,d)})})):void 0},D=function(a,d,e){var f=arguments;b.hasTouch||(d=b.getPCevts(d));var g="string"===b.getType(f[0])?document.querySelectorAll(f[0]):f[0];g=g.length?Array.prototype.call(g):[g],g.forEach(function(a){c.trigger(a,d,e)})};a();var E={};return E.on=E.bind=E.live=B,E.off=E.unbind=E.die=C,E.config=d,E.trigger=D,E});
